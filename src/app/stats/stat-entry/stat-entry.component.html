<div class="container">
  <h1>Stat Entry Page</h1>

  <form [formGroup]="statForm" (ngSubmit)="onSubmit()">
    <!-- Personal Information Section -->
    <div class="form-section">
      <h2>Personal Information</h2>
      <div class="form-group">
        <label for="gender">Gender:</label>
        <select id="gender" formControlName="gender">
          <option value="">Select Gender</option>
          <option value="male">Male</option>
          <option value="female">Female</option>
          <option value="other">Other</option>
        </select>
        @if (hasError('gender')) {
        <div class="error-message">{{ getErrorMessage('gender') }}</div>
        }
      </div>

      <div class="form-group">
        <label for="dateOfBirth">Date of Birth:</label>
        <input type="date" id="dateOfBirth" formControlName="dateOfBirth" />
        @if (hasError('dateOfBirth')) {
        <div class="error-message">{{ getErrorMessage('dateOfBirth') }}</div>
        }
      </div>

      <div class="form-group">
        <label for="weight">Weight (lbs):</label>
        <input type="number" id="weight" formControlName="weight" min="1" max="1000" step="0.1" />
        @if (hasError('weight')) {
        <div class="error-message">{{ getErrorMessage('weight') }}</div>
        }
      </div>
    </div>

    <!-- Fitness Section -->
    <div class="form-section">
      <h2>Fitness & Exercise</h2>
      <div class="form-group">
        <label for="cardioFitness">Cardio Fitness (1 mile time):</label>
        <input
          type="text"
          id="cardioFitness"
          formControlName="cardioFitness"
          maxlength="5"
          placeholder="MM:SS"
          (blur)="onTimeBlur($event)"
        />
        @if (hasError('cardioFitness')) {
        <div class="error-message">{{ getErrorMessage('cardioFitness') }}</div>
        }
      </div>

      @if (showHeartRateGroup) {
      <div class="form-group">
        <label for="heartRate">Heart Rate (bpm):</label>
        <input type="number" id="heartRate" formControlName="heartRate" min="40" max="220" />
        @if (hasError('heartRate')) {
        <div class="error-message">{{ getErrorMessage('heartRate') }}</div>
        }
      </div>
      }

      <div class="form-group">
        <label for="strength">Strength Training Exercise:</label>
        <select id="strength" formControlName="strength">
          <option value="">Select Exercise</option>
          <option value="squat">Squat</option>
          <option value="bench">Bench</option>
        </select>
        @if (hasError('strength')) {
        <div class="error-message">{{ getErrorMessage('strength') }}</div>
        }
      </div>

      @if (showStrengthTypeGroup) {
      <div class="form-group">
        <label for="strengthType">Strength Training Type:</label>
        <select
          id="strengthType"
          formControlName="strengthType"
          (change)="onStrengthTypeChange($any($event.target).value)"
        >
          <option value="">Select Type</option>
          <option value="oneRepMax">1 Rep Max</option>
          <option value="weightReps">Weight & Reps</option>
        </select>
        @if (hasError('strengthType')) {
        <div class="error-message">{{ getErrorMessage('strengthType') }}</div>
        }
      </div>
      } @if (showOneRepMaxGroup) {
      <div class="form-group">
        <label for="oneRepMax">1 Rep Max Weight (lbs):</label>
        <input
          type="number"
          id="oneRepMax"
          formControlName="oneRepMax"
          min="1"
          max="2000"
          step="0.1"
        />
        @if (hasError('oneRepMax')) {
        <div class="error-message">{{ getErrorMessage('oneRepMax') }}</div>
        }
      </div>
      } @if (showWeightRepsGroup) {
      <div class="form-group">
        <label for="exerciseWeight">Weight (lbs):</label>
        <input
          type="number"
          id="exerciseWeight"
          formControlName="exerciseWeight"
          min="1"
          max="2000"
          step="0.1"
        />
        @if (hasError('exerciseWeight')) {
        <div class="error-message">{{ getErrorMessage('exerciseWeight') }}</div>
        }
        <label for="reps">Number of Reps:</label>
        <input type="number" id="reps" formControlName="reps" min="1" max="100" />
        @if (hasError('reps')) {
        <div class="error-message">{{ getErrorMessage('reps') }}</div>
        }
      </div>
      }
    </div>

    <!-- Health Metrics Section -->
    <div class="form-section">
      <h2>Health Metrics</h2>
      <div class="form-group">
        <label for="bloodSugar">Blood Sugar (HbA1c %):</label>
        <input
          type="number"
          id="bloodSugar"
          formControlName="bloodSugar"
          min="3"
          max="15"
          step="0.1"
        />
        @if (hasError('bloodSugar')) {
        <div class="error-message">{{ getErrorMessage('bloodSugar') }}</div>
        }
      </div>

      <div class="form-group">
        <label for="totalCholesterol">Total Cholesterol (mg/dL):</label>
        <input
          type="number"
          id="totalCholesterol"
          formControlName="totalCholesterol"
          min="100"
          max="500"
        />
        @if (hasError('totalCholesterol')) {
        <div class="error-message">{{ getErrorMessage('totalCholesterol') }}</div>
        }
      </div>

      <div class="form-group">
        <label for="hdlCholesterol">HDL Cholesterol (mg/dL):</label>
        <input
          type="number"
          id="hdlCholesterol"
          formControlName="hdlCholesterol"
          min="20"
          max="150"
        />
        @if (hasError('hdlCholesterol')) {
        <div class="error-message">{{ getErrorMessage('hdlCholesterol') }}</div>
        }
      </div>

      <div class="form-group">
        <label for="sleep">Sleep (hours per night):</label>
        <input type="number" id="sleep" formControlName="sleep" min="0" max="24" step="0.5" />
        @if (hasError('sleep')) {
        <div class="error-message">{{ getErrorMessage('sleep') }}</div>
        }
      </div>

      <div class="form-group">
        <label for="sleepEfficiency">Sleep Efficiency (%):</label>
        <input
          type="number"
          id="sleepEfficiency"
          formControlName="sleepEfficiency"
          min="0"
          max="100"
          step="1"
        />
        @if (hasError('sleepEfficiency')) {
        <div class="error-message">{{ getErrorMessage('sleepEfficiency') }}</div>
        }
      </div>

      <div class="form-group">
        <label for="sleepRem">REM Sleep (%):</label>
        <input type="number" id="sleepRem" formControlName="sleepRem" min="0" max="100" step="1" />
        @if (hasError('sleepRem')) {
        <div class="error-message">{{ getErrorMessage('sleepRem') }}</div>
        }
      </div>

      <div class="form-group">
        <label for="sleepDeep">Deep Sleep (%):</label>
        <input
          type="number"
          id="sleepDeep"
          formControlName="sleepDeep"
          min="0"
          max="100"
          step="1"
        />
        @if (hasError('sleepDeep')) {
        <div class="error-message">{{ getErrorMessage('sleepDeep') }}</div>
        }
      </div>
    </div>

    <button type="submit" [disabled]="statForm.invalid">Submit</button>
  </form>
</div>
